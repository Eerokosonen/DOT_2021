{"ast":null,"code":"var _jsxFileName = \"/Users/eerokosonen/Documents/Koulu /3.vsk/DOT/Project/projectapp/src/Databox.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './content.css'; // PNG DOWNLOAD\n\nimport { useRechartToPng } from \"recharts-to-png\";\nimport { saveAs } from 'file-saver'; // PNG DOWNLOAD\n\nimport Modal from 'react-modal'; // React-tabs module\n\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\nimport moment from 'moment'; // Module for date formatting\n// Recharts.js module\n\nimport { BarChart, CartesianGrid, XAxis, YAxis, Tooltip, Bar, Legend } from 'recharts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Databox({\n  isupdated,\n  setModifiedId,\n  Email\n}) {\n  _s();\n\n  const [dataset, setDataset] = useState([]);\n  let [modalOpen, setModalOpen] = useState(false);\n  useEffect(() => {\n    getData();\n  }, [isupdated]); // PNG Download\n\n  const [png, ref] = useRechartToPng();\n  const handleDownload = React.useCallback(async () => {\n    saveAs(png, \"myChart.png\");\n  }, [png]); // PNG Download\n  // Fetching data from the server\n\n  async function getData() {\n    fetch('http://localhost:3000/' + Email).then(res => {\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).then(data => {\n      setDataset(data);\n      setModifiedId();\n    }) // Set fetched data to an array\n    .catch(error => console.error('Error:', error));\n  }\n\n  async function removeObs(obs) {\n    await fetch('http://localhost:3000/' + Email + '/' + obs.id, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(() => {\n      getData();\n    }) // Refresh Array when obs deleted\n    .catch(error => console.error(\"error: \" + error));\n  }\n\n  async function openObs(id) {\n    await fetch('http://localhost:3000/' + Email + '/' + id).then(res => {\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).then(data => {\n      openModal(JSON.stringify(data));\n    }) // Set fetched data to an array\n    .catch(error => console.error('Error:', error));\n  }\n\n  function openModal(data) {\n    setModalOpen(true);\n    alert(data);\n  }\n\n  function closeModal() {\n    setModalOpen(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Tabs, {\n    className: \"box\",\n    children: [/*#__PURE__*/_jsxDEV(TabList, {\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        children: \"Array\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        children: \"Graph\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Havainto nro:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nukkumaan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Her\\xE4tty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nukuttu aika\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Unen laatu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: dataset.map((c, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: moment(c.tosleep).format(\"DD.MM.YYYY HH:mm\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: moment(c.fromsleep).format(\"DD.MM.YYYY HH:mm\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.totalHours\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.range\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [c.desc.slice(0, 20), \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => openObs(c.id),\n                children: \"Avaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setModifiedId(c.id),\n                children: \"Muokkaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeObs(c),\n                children: \"Poista\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 17\n            }, this)]\n          }, c.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n      children: [/*#__PURE__*/_jsxDEV(BarChart, {\n        width: 450,\n        height: 250,\n        data: dataset,\n        ref: ref,\n        children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n          dataKey: \"id\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"totalHours\",\n          name: \"Nukuttu aika tunteina\",\n          fill: \"#8884d8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"range\",\n          name: \"Unen laatu\",\n          fill: \"#82ca9d\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDownload,\n        children: \"Lataa kuvio png-tiedostona\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: modaOpen,\n      onAfterOpen: afterOpenModal,\n      onRequestClose: closeModal,\n      style: customStyles,\n      contentLabel: \"Example Modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        ref: _subtitle => subtitle = _subtitle,\n        children: \"Hello\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closeModal,\n        children: \"close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"I am a modal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"tab navigation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"stays\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"inside\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"the modal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Databox, \"Ev1INtrtwACj8AgaqPaBkTC1H9I=\", false, function () {\n  return [useRechartToPng];\n});\n\n_c = Databox;\nexport default Databox;\n\nvar _c;\n\n$RefreshReg$(_c, \"Databox\");","map":{"version":3,"sources":["/Users/eerokosonen/Documents/Koulu /3.vsk/DOT/Project/projectapp/src/Databox.js"],"names":["React","useState","useEffect","useRechartToPng","saveAs","Modal","Tab","Tabs","TabList","TabPanel","moment","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","Legend","Databox","isupdated","setModifiedId","Email","dataset","setDataset","modalOpen","setModalOpen","getData","png","ref","handleDownload","useCallback","fetch","then","res","status","json","error","Error","data","catch","console","removeObs","obs","id","method","headers","openObs","openModal","JSON","stringify","alert","closeModal","map","c","index","tosleep","format","fromsleep","totalHours","range","desc","slice","modaOpen","afterOpenModal","customStyles","_subtitle","subtitle"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './content.css';\n\n// PNG DOWNLOAD\nimport { useRechartToPng } from \"recharts-to-png\";\nimport { saveAs } from 'file-saver';\n// PNG DOWNLOAD\n\nimport Modal from 'react-modal';\n\n// React-tabs module\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\n\nimport moment from 'moment'; // Module for date formatting\n\n// Recharts.js module\nimport { BarChart, CartesianGrid, XAxis, YAxis, Tooltip, Bar, Legend } from 'recharts';\n\nfunction Databox({ isupdated, setModifiedId, Email }) {\n\n  const [dataset, setDataset] = useState([]);\n  let [modalOpen, setModalOpen] = useState(false);\n\n  useEffect(() => {\n    getData();\n  }, [isupdated]);\n\n  // PNG Download\n  const [png, ref] = useRechartToPng();\n  const handleDownload = React.useCallback(async () => {\n    saveAs(png, \"myChart.png\");\n  }, [png]);\n  // PNG Download\n\n  // Fetching data from the server\n  async function getData() {\n    fetch('http://localhost:3000/' + Email)\n      .then(res => {\n        if (res.status === 200) {\n          return res.json();\n        } else {\n          const error = new Error(res.error);\n          throw error;\n        }\n      })\n      .then(data => { setDataset(data); setModifiedId(); }) // Set fetched data to an array\n      .catch(error => console.error('Error:', error))\n  }\n\n  async function removeObs(obs) {\n    await fetch('http://localhost:3000/' + Email + '/' + obs.id, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(() => { getData(); }) // Refresh Array when obs deleted\n      .catch(error => console.error(\"error: \" + error))\n  }\n\n  async function openObs(id) {\n    await fetch('http://localhost:3000/' + Email + '/' + id,)\n      .then(res => {\n        if (res.status === 200) {\n          return res.json();\n        } else {\n          const error = new Error(res.error);\n          throw error;\n        }\n      })\n      .then(data => { openModal(JSON.stringify(data)) }) // Set fetched data to an array\n      .catch(error => console.error('Error:', error))\n  }\n\n  function openModal(data){    \n    setModalOpen(true);\n    alert(data);\n  }\n\n  function closeModal(){\n    setModalOpen(false);\n  }\n\n  return (\n    <Tabs className=\"box\">\n      <TabList>\n        <Tab>Array</Tab>\n        <Tab>Graph</Tab>\n      </TabList>\n\n      <TabPanel>\n        <table>\n          <thead>\n            <tr>\n              <th>Havainto nro:</th>\n              <th>Nukkumaan</th>\n              <th>Her√§tty</th>\n              <th>Nukuttu aika</th>\n              <th>Unen laatu</th>\n            </tr>\n          </thead>\n          <tbody>\n            {dataset.map((c, index) =>\n              <tr key={c.id}>\n                <td>{c.id}</td>\n                <td>{moment(c.tosleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n                <td>{moment(c.fromsleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n                <td>{c.totalHours}</td>\n                <td>{c.range}</td>\n                <td>{c.desc.slice(0, 20)}...</td>\n                <td><button onClick={() => openObs(c.id)}>Avaa</button></td>\n                <td><button onClick={() => setModifiedId(c.id)}>Muokkaa</button></td>\n                <td><button onClick={() => removeObs(c)}>Poista</button></td>\n              </tr>)}\n          </tbody>\n        </table>\n      </TabPanel>\n\n      <TabPanel>\n        <BarChart width={450} height={250} data={dataset} ref={ref}>\n          <CartesianGrid />\n          <XAxis dataKey=\"id\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Bar dataKey=\"totalHours\" name=\"Nukuttu aika tunteina\" fill=\"#8884d8\" />\n          <Bar dataKey=\"range\" name=\"Unen laatu\" fill=\"#82ca9d\" />\n        </BarChart>\n        <button onClick={handleDownload}>Lataa kuvio png-tiedostona</button>\n      </TabPanel>\n\n      <Modal\n          isOpen={modaOpen}\n          onAfterOpen={afterOpenModal}\n          onRequestClose={closeModal}\n          style={customStyles}\n          contentLabel=\"Example Modal\"\n        >\n \n          <h2 ref={_subtitle => (subtitle = _subtitle)}>Hello</h2>\n          <button onClick={closeModal}>close</button>\n          <div>I am a modal</div>\n          <form>\n            <input />\n            <button>tab navigation</button>\n            <button>stays</button>\n            <button>inside</button>\n            <button>the modal</button>\n          </form>\n      </Modal>\n\n    </Tabs>\n  );\n}\n\n\n\nexport default Databox;\n"]},"metadata":{},"sourceType":"module"}