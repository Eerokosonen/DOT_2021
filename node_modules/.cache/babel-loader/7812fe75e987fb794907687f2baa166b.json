{"ast":null,"code":"var _jsxFileName = \"/Users/eerokosonen/Documents/Koulu /3.vsk/DOT/Project/projectapp/src/Databox.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './content.css'; // PNG DOWNLOAD\n\nimport { useRechartToPng } from \"recharts-to-png\";\nimport { saveAs } from 'file-saver'; // PNG DOWNLOAD\n\nimport Modal from 'react-modal'; // React-tabs module\n\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\nimport moment from 'moment'; // Module for date formatting\n// Recharts.js module\n\nimport { BarChart, CartesianGrid, XAxis, YAxis, Tooltip, Bar, Legend } from 'recharts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Databox({\n  isupdated,\n  setModifiedId,\n  Email\n}) {\n  _s();\n\n  const [dataset, setDataset] = useState([]);\n  let [modalOpen, setModalOpen] = useState(false);\n  let [modaldata, setModaldata] = useState();\n  useEffect(() => {\n    getData();\n  }, [isupdated]); // PNG Download\n\n  const [png, ref] = useRechartToPng();\n  const handleDownload = React.useCallback(async () => {\n    saveAs(png, \"myChart.png\");\n  }, [png]); // PNG Download\n  // Fetching data from the server\n\n  async function getData() {\n    fetch('http://localhost:3000/' + Email).then(res => {\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).then(data => {\n      setDataset(data);\n      setModifiedId();\n    }) // Set fetched data to an array\n    .catch(error => console.error('Error:', error));\n  }\n\n  async function removeObs(obs) {\n    await fetch('http://localhost:3000/' + Email + '/' + obs.id, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(() => {\n      getData();\n    }) // Refresh Array when obs deleted\n    .catch(error => console.error(\"error: \" + error));\n  }\n\n  async function openObs(id) {\n    await fetch('http://localhost:3000/' + Email + '/' + id).then(res => {\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).then(data => {\n      openModal(JSON.stringify(data));\n    }) // Set fetched data to an array\n    .catch(error => console.error('Error:', error));\n  }\n\n  function openModal(data) {\n    setModalOpen(true);\n    fillmodaldata(data);\n  }\n\n  function fillmodaldata(data) {\n    setModaldata( /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Havainto nro:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Nukkumaan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Her\\xE4tty\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Nukuttu aika\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Unen laatu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Kuvaus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: moment(data.tosleep).format(\"DD.MM.YYYY HH:mm\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: moment(data.fromsleep).format(\"DD.MM.YYYY HH:mm\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.totalHours\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.range\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this));\n  }\n\n  function closeModal() {\n    setModalOpen(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Tabs, {\n    className: \"box\",\n    children: [/*#__PURE__*/_jsxDEV(TabList, {\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        children: \"Array\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        children: \"Graph\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Havainto nro:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nukkumaan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Her\\xE4tty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nukuttu aika\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Unen laatu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: dataset.map((c, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: moment(c.tosleep).format(\"DD.MM.YYYY HH:mm\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: moment(c.fromsleep).format(\"DD.MM.YYYY HH:mm\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.totalHours\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.range\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [c.desc.slice(0, 20), \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => openObs(c.id),\n                children: \"Avaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setModifiedId(c.id),\n                children: \"Muokkaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeObs(c),\n                children: \"Poista\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this)]\n          }, c.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n      children: [/*#__PURE__*/_jsxDEV(BarChart, {\n        width: 450,\n        height: 250,\n        data: dataset,\n        ref: ref,\n        children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n          dataKey: \"id\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"totalHours\",\n          name: \"Nukuttu aika tunteina\",\n          fill: \"#8884d8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"range\",\n          name: \"Unen laatu\",\n          fill: \"#82ca9d\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDownload,\n        children: \"Lataa kuvio png-tiedostona\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: modalOpen,\n      onRequestClose: closeModal,\n      contentLabel: \"Modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closeModal,\n        children: \"close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), modaldata]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Databox, \"uAYga8BuAnz2Ct9NKW713qYXZq4=\", false, function () {\n  return [useRechartToPng];\n});\n\n_c = Databox;\nexport default Databox;\n\nvar _c;\n\n$RefreshReg$(_c, \"Databox\");","map":{"version":3,"sources":["/Users/eerokosonen/Documents/Koulu /3.vsk/DOT/Project/projectapp/src/Databox.js"],"names":["React","useState","useEffect","useRechartToPng","saveAs","Modal","Tab","Tabs","TabList","TabPanel","moment","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","Legend","Databox","isupdated","setModifiedId","Email","dataset","setDataset","modalOpen","setModalOpen","modaldata","setModaldata","getData","png","ref","handleDownload","useCallback","fetch","then","res","status","json","error","Error","data","catch","console","removeObs","obs","id","method","headers","openObs","openModal","JSON","stringify","fillmodaldata","tosleep","format","fromsleep","totalHours","range","desc","closeModal","map","c","index","slice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './content.css';\n\n// PNG DOWNLOAD\nimport { useRechartToPng } from \"recharts-to-png\";\nimport { saveAs } from 'file-saver';\n// PNG DOWNLOAD\n\nimport Modal from 'react-modal';\n\n// React-tabs module\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\n\nimport moment from 'moment'; // Module for date formatting\n\n// Recharts.js module\nimport { BarChart, CartesianGrid, XAxis, YAxis, Tooltip, Bar, Legend } from 'recharts';\n\nfunction Databox({ isupdated, setModifiedId, Email }) {\n\n  const [dataset, setDataset] = useState([]);\n  let [modalOpen, setModalOpen] = useState(false);\n  let [modaldata, setModaldata] = useState();\n\n  useEffect(() => {\n    getData();\n  }, [isupdated]);\n\n  // PNG Download\n  const [png, ref] = useRechartToPng();\n  const handleDownload = React.useCallback(async () => {\n    saveAs(png, \"myChart.png\");\n  }, [png]);\n  // PNG Download\n\n  // Fetching data from the server\n  async function getData() {\n    fetch('http://localhost:3000/' + Email)\n      .then(res => {\n        if (res.status === 200) {\n          return res.json();\n        } else {\n          const error = new Error(res.error);\n          throw error;\n        }\n      })\n      .then(data => { setDataset(data); setModifiedId(); }) // Set fetched data to an array\n      .catch(error => console.error('Error:', error))\n  }\n\n  async function removeObs(obs) {\n    await fetch('http://localhost:3000/' + Email + '/' + obs.id, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(() => { getData(); }) // Refresh Array when obs deleted\n      .catch(error => console.error(\"error: \" + error))\n  }\n\n  async function openObs(id) {\n    await fetch('http://localhost:3000/' + Email + '/' + id,)\n      .then(res => {\n        if (res.status === 200) {\n          return res.json();\n        } else {\n          const error = new Error(res.error);\n          throw error;\n        }\n      })\n      .then(data => { openModal(JSON.stringify(data)) }) // Set fetched data to an array\n      .catch(error => console.error('Error:', error))\n  }\n\n  function openModal(data) {\n    setModalOpen(true);\n    fillmodaldata(data);\n  }\n\n  function fillmodaldata(data) {\n    setModaldata(\n      <table>\n        <thead>\n          <tr>\n            <th>Havainto nro:</th>\n            <th>Nukkumaan</th>\n            <th>Herätty</th>\n            <th>Nukuttu aika</th>\n            <th>Unen laatu</th>\n            <th>Kuvaus</th>\n          </tr>\n        </thead>\n        <tbody>\n            <tr>\n              <td>{data.id}</td>\n              <td>{moment(data.tosleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n              <td>{moment(data.fromsleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n              <td>{data.totalHours}</td>\n              <td>{data.range}</td>\n              <td>{data.desc}</td>\n            </tr>\n        </tbody>\n      </table>\n    )\n  }\n\n  function closeModal() {\n    setModalOpen(false);\n  }\n\n  return (\n    <Tabs className=\"box\">\n      <TabList>\n        <Tab>Array</Tab>\n        <Tab>Graph</Tab>\n      </TabList>\n\n      <TabPanel>\n        <table>\n          <thead>\n            <tr>\n              <th>Havainto nro:</th>\n              <th>Nukkumaan</th>\n              <th>Herätty</th>\n              <th>Nukuttu aika</th>\n              <th>Unen laatu</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {dataset.map((c, index) =>\n              <tr key={c.id}>\n                <td>{c.id}</td>\n                <td>{moment(c.tosleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n                <td>{moment(c.fromsleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n                <td>{c.totalHours}</td>\n                <td>{c.range}</td>\n                <td>{c.desc.slice(0, 20)}...</td>\n                <td><button onClick={() => openObs(c.id)}>Avaa</button></td>\n                <td><button onClick={() => setModifiedId(c.id)}>Muokkaa</button></td>\n                <td><button onClick={() => removeObs(c)}>Poista</button></td>\n              </tr>)}\n          </tbody>\n        </table>\n      </TabPanel>\n\n      <TabPanel>\n        <BarChart width={450} height={250} data={dataset} ref={ref}>\n          <CartesianGrid />\n          <XAxis dataKey=\"id\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Bar dataKey=\"totalHours\" name=\"Nukuttu aika tunteina\" fill=\"#8884d8\" />\n          <Bar dataKey=\"range\" name=\"Unen laatu\" fill=\"#82ca9d\" />\n        </BarChart>\n        <button onClick={handleDownload}>Lataa kuvio png-tiedostona</button>\n      </TabPanel>\n\n      <Modal isOpen={modalOpen} onRequestClose={closeModal} contentLabel=\"Modal\">\n        <button onClick={closeModal}>close</button>\n        {modaldata}\n      </Modal>\n\n    </Tabs>\n  );\n}\n\n\n\nexport default Databox;\n"]},"metadata":{},"sourceType":"module"}