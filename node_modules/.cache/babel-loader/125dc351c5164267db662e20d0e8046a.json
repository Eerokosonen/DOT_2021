{"ast":null,"code":"var _jsxFileName = \"/Users/eerokosonen/Documents/Koulu /3.vsk/DOT/Project/projectapp/src/Databox.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './content.css'; // Styling for Formbox & Databox components\n\nimport './App.css'; // Basic styling\n\nimport { FaEdit, FaTrashAlt } from \"react-icons/fa\"; // PNG DOWNLOAD\n\nimport { useRechartToPng } from \"recharts-to-png\";\nimport { saveAs } from 'file-saver'; // PNG DOWNLOAD\n\nimport Modal from 'react-modal'; // React-tabs module\n\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\nimport moment from 'moment'; // Module for date formatting\n// Recharts.js module\n\nimport { BarChart, CartesianGrid, XAxis, YAxis, Tooltip, Bar, Legend } from 'recharts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Databox({\n  isupdated,\n  setModifiedId,\n  Email\n}) {\n  _s();\n\n  const [dataset, setDataset] = useState([]);\n  let [modalOpen, setModalOpen] = useState(false);\n  let [modaldata, setModaldata] = useState();\n  useEffect(() => {\n    getData();\n  }, [isupdated]); // PNG Download\n\n  const [png, ref] = useRechartToPng();\n  const handleDownload = React.useCallback(async () => {\n    saveAs(png, \"myChart.png\");\n  }, [png]); // PNG Download\n  // Fetching data from the server\n\n  async function getData() {\n    fetch('http://localhost:3000/' + Email).then(res => {\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).then(data => {\n      setDataset(data);\n      setModifiedId();\n    }) // Set fetched data to an array\n    .catch(error => console.error('Error:', error));\n  }\n\n  async function removeObs(obs) {\n    await fetch('http://localhost:3000/' + Email + '/' + obs.id, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(() => {\n      getData();\n    }) // Refresh Array when obs deleted\n    .catch(error => console.error(\"error: \" + error));\n  }\n\n  async function openObs(id) {\n    await fetch('http://localhost:3000/' + Email + '/' + id).then(res => {\n      if (res.status === 200) {\n        return res.json();\n      } else {\n        const error = new Error(res.error);\n        throw error;\n      }\n    }).then(data => {\n      openModal(data);\n    }) // Set fetched data to an array\n    .catch(error => console.error('Error:', error));\n  }\n\n  function openModal(data) {\n    setModalOpen(true);\n    fillmodaldata(data);\n  }\n\n  function fillmodaldata(data) {\n    setModaldata( /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"modaltable\",\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Havainto nro:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Nukkuaan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: moment(data.tosleep).format(\"DD.MM.YYYY HH:mm\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Her\\xE4tty:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: moment(data.fromsleep).format(\"DD.MM.YYYY HH:mm\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Kokonaisaika:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.totalHours\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Unen laatu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.range\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Kuvaus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this));\n  }\n\n  function closeModal() {\n    setModalOpen(false);\n  }\n\n  const formattosleep = tickItem => {\n    return moment(tickItem).format(\"DD.MM HH:mm\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(Tabs, {\n    className: \"box\",\n    children: [/*#__PURE__*/_jsxDEV(TabList, {\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        children: \"Array\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        children: \"Graph\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Havainto nro:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nukkumaan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Her\\xE4tty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nukuttu aika\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Unen laatu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: dataset.map((c, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => openObs(c.id),\n                children: \"Avaa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: moment(c.tosleep).format(\"DD.MM.YYYY HH:mm\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: moment(c.fromsleep).format(\"DD.MM.YYYY HH:mm\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.totalHours\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: c.range\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setModifiedId(c.id),\n                children: /*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 63\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeObs(c),\n                children: /*#__PURE__*/_jsxDEV(FaTrashAlt, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 58\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this)]\n          }, c.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n      children: [/*#__PURE__*/_jsxDEV(BarChart, {\n        width: 450,\n        height: 250,\n        data: dataset,\n        ref: ref,\n        className: \"barchart\",\n        children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n          dataKey: \"id\",\n          tickFormatter: formattosleep\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"totalHours\",\n          name: \"Nukuttu aika tunteina\",\n          fill: \"#8884d8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"range\",\n          name: \"Unen laatu\",\n          fill: \"#82ca9d\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDownload,\n        className: \"pngbutton\",\n        children: \"Lataa kuvio png-tiedostona\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      ariaHideApp: false,\n      isOpen: modalOpen,\n      onRequestClose: closeModal,\n      contentLabel: \"Modal\",\n      className: \"modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closeModal,\n        children: \"close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), modaldata]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Databox, \"uAYga8BuAnz2Ct9NKW713qYXZq4=\", false, function () {\n  return [useRechartToPng];\n});\n\n_c = Databox;\nexport default Databox;\n\nvar _c;\n\n$RefreshReg$(_c, \"Databox\");","map":{"version":3,"sources":["/Users/eerokosonen/Documents/Koulu /3.vsk/DOT/Project/projectapp/src/Databox.js"],"names":["React","useState","useEffect","FaEdit","FaTrashAlt","useRechartToPng","saveAs","Modal","Tab","Tabs","TabList","TabPanel","moment","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","Legend","Databox","isupdated","setModifiedId","Email","dataset","setDataset","modalOpen","setModalOpen","modaldata","setModaldata","getData","png","ref","handleDownload","useCallback","fetch","then","res","status","json","error","Error","data","catch","console","removeObs","obs","id","method","headers","openObs","openModal","fillmodaldata","tosleep","format","fromsleep","totalHours","range","desc","closeModal","formattosleep","tickItem","map","c","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './content.css'; // Styling for Formbox & Databox components\nimport './App.css'; // Basic styling\n\nimport { FaEdit, FaTrashAlt } from \"react-icons/fa\";\n\n// PNG DOWNLOAD\nimport { useRechartToPng } from \"recharts-to-png\";\nimport { saveAs } from 'file-saver';\n// PNG DOWNLOAD\n\nimport Modal from 'react-modal';\n\n// React-tabs module\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\n\nimport moment from 'moment'; // Module for date formatting\n\n// Recharts.js module\nimport { BarChart, CartesianGrid, XAxis, YAxis, Tooltip, Bar, Legend } from 'recharts';\n\n\nfunction Databox({ isupdated, setModifiedId, Email }) {\n  \n  const [dataset, setDataset] = useState([]);\n  let [modalOpen, setModalOpen] = useState(false);\n  let [modaldata, setModaldata] = useState();\n\n  useEffect(() => {\n    getData();\n  }, [isupdated]);\n\n  // PNG Download\n  const [png, ref] = useRechartToPng();\n  const handleDownload = React.useCallback(async () => {\n    saveAs(png, \"myChart.png\");\n  }, [png]);\n  // PNG Download\n\n  // Fetching data from the server\n  async function getData() {\n    fetch('http://localhost:3000/' + Email)\n      .then(res => {\n        if (res.status === 200) {\n          return res.json();\n        } else {\n          const error = new Error(res.error);\n          throw error;\n        }\n      })\n      .then(data => { setDataset(data); setModifiedId(); }) // Set fetched data to an array\n      .catch(error => console.error('Error:', error))\n  }\n\n  async function removeObs(obs) {\n    await fetch('http://localhost:3000/' + Email + '/' + obs.id, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then(() => { getData(); }) // Refresh Array when obs deleted\n      .catch(error => console.error(\"error: \" + error))\n  }\n\n  async function openObs(id) {\n    await fetch('http://localhost:3000/' + Email + '/' + id,)\n      .then(res => {\n        if (res.status === 200) {\n          return res.json();\n        } else {\n          const error = new Error(res.error);\n          throw error;\n        }\n      })\n      .then(data => { openModal(data) }) // Set fetched data to an array\n      .catch(error => console.error('Error:', error))\n  }\n\n  function openModal(data) {\n    setModalOpen(true);\n    fillmodaldata(data);\n  }\n\n  function fillmodaldata(data) {\n    setModaldata(\n      <table className=\"modaltable\">\n        <tbody>\n          <tr>\n            <th>Havainto nro:</th>  \n            <td>{data.id}</td>\n          </tr>\n          <tr>\n            <th>Nukkuaan</th>\n            <td>{moment(data.tosleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n          </tr>\n          <tr>\n            <th>Herätty:</th>\n            <td>{moment(data.fromsleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n          </tr>\n          <tr>\n            <th>Kokonaisaika:</th>\n            <td>{data.totalHours}</td>\n          </tr>\n          <tr>\n            <th>Unen laatu</th>\n            <td>{data.range}</td>\n          </tr>\n          <tr>\n            <th>Kuvaus</th>\n            <td>{data.desc}</td>\n          </tr>\n        </tbody>\n      </table>\n    )\n  }\n\n  function closeModal() {\n    setModalOpen(false);\n  }\n\n  const formattosleep = (tickItem) => {\n    return moment(tickItem).format(\"DD.MM HH:mm\");\n  }\n\n  return (\n    <Tabs className=\"box\">\n      <TabList>\n        <Tab>Array</Tab>\n        <Tab>Graph</Tab>\n      </TabList>\n\n      <TabPanel>\n        <table>\n          <thead>\n            <tr>\n              <th></th>\n              <th>Havainto nro:</th>\n              <th>Nukkumaan</th>\n              <th>Herätty</th>\n              <th>Nukuttu aika</th>\n              <th>Unen laatu</th>              \n            </tr>\n          </thead>\n          <tbody>\n            {dataset.map((c, index) =>\n              <tr key={c.id}>\n                <td><button onClick={() => openObs(c.id)}>Avaa</button></td>\n                <td>{c.id}</td>\n                <td>{moment(c.tosleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n                <td>{moment(c.fromsleep).format(\"DD.MM.YYYY HH:mm\")}</td>\n                <td>{c.totalHours}</td>\n                <td>{c.range}</td>\n                <td>\n                  <button onClick={() => setModifiedId(c.id)}><FaEdit/></button>\n                </td>\n                <td><button onClick={() => removeObs(c)}><FaTrashAlt/></button></td>\n              </tr>)}\n          </tbody>\n        </table>\n      </TabPanel>\n\n      <TabPanel>\n        <BarChart width={450} height={250} data={dataset} ref={ref} className=\"barchart\">\n          <CartesianGrid />\n          <XAxis dataKey=\"id\" tickFormatter={formattosleep} />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Bar dataKey=\"totalHours\" name=\"Nukuttu aika tunteina\" fill=\"#8884d8\" />\n          <Bar dataKey=\"range\" name=\"Unen laatu\" fill=\"#82ca9d\" />\n        </BarChart>\n        <button onClick={handleDownload} className=\"pngbutton\">Lataa kuvio png-tiedostona</button>\n      </TabPanel>\n\n      <Modal  ariaHideApp={false} isOpen={modalOpen} onRequestClose={closeModal} contentLabel=\"Modal\" className=\"modal\">\n        <button onClick={closeModal}>close</button>\n        {modaldata}\n      </Modal>\n\n    </Tabs>\n  );\n}\n\n\n\nexport default Databox;\n"]},"metadata":{},"sourceType":"module"}